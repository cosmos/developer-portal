(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{740:function(e,t,a){"use strict";a.r(t);var c=a(1),g=Object(c.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"add-your-first-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-your-first-message"}},[e._v("#")]),e._v(" Add Your First Message")]),e._v(" "),a("p",[e._v("In the "),a("RouterLink",{attrs:{to:"/hands-on-exercise/0-native/3-add-game.html"}},[e._v("previous section")]),e._v(", you added a game storage space in the checkers module storage. It is now time to actually put games in storage:")],1),e._v(" "),a("ul",[a("li",[e._v("Add a message type to create a game.")]),e._v(" "),a("li",[e._v("Add all the necessary keeper and message server functions.")]),e._v(" "),a("li",[e._v("Add CLI commands.")])]),e._v(" "),a("h2",{attrs:{id:"add-a-game-creation-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-a-game-creation-message"}},[e._v("#")]),e._v(" Add a game creation message")]),e._v(" "),a("p",[e._v("With the storage ready to receive games, it is time to add a message to let players create games:")]),e._v(" "),a("ul",[a("li",[e._v("A game starts with an initial board and turn, as per the rules. The game creator "),a("strong",[e._v("does not choose")]),e._v(" how the initial pieces are placed.")]),e._v(" "),a("li",[e._v("A game needs an "),a("strong",[e._v("unused index")]),e._v(" to be created. For simplicity's sake, the index will be passed along with the message.")])]),e._v(" "),a("p",[e._v("You are going to:")]),e._v(" "),a("ul",[a("li",[e._v("Create the message type.")]),e._v(" "),a("li",[e._v("Compile Protobuf.")]),e._v(" "),a("li",[e._v("Create a message server next to the keeper.")]),e._v(" "),a("li",[e._v("Handle the message.")]),e._v(" "),a("li",[e._v("Register the necessary elements in the module.")])]),e._v(" "),a("h3",{attrs:{id:"the-game-creation-object-type-and-protobuf-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-game-creation-object-type-and-protobuf-service"}},[e._v("#")]),e._v(" The game creation object type and Protobuf service")]),e._v(" "),a("p",[e._v("These are defined together in a new file "),a("code",[e._v("proto/alice/checkers/v1/tx.proto")]),e._v(" that you create:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"protobuf",base64:"c3ludGF4ID0gJnF1b3Q7cHJvdG8zJnF1b3Q7OwpwYWNrYWdlIGFsaWNlLmNoZWNrZXJzLnYxOwoKb3B0aW9uIGdvX3BhY2thZ2UgPSAmcXVvdDtnaXRodWIuY29tL2FsaWNlL2NoZWNrZXJzJnF1b3Q7OwoKaW1wb3J0ICZxdW90O2Nvc21vcy9tc2cvdjEvbXNnLnByb3RvJnF1b3Q7OwppbXBvcnQgJnF1b3Q7Z29nb3Byb3RvL2dvZ28ucHJvdG8mcXVvdDs7CmltcG9ydCAmcXVvdDthbGljZS9jaGVja2Vycy92MS90eXBlcy5wcm90byZxdW90OzsKaW1wb3J0ICZxdW90O2Nvc21vc19wcm90by9jb3Ntb3MucHJvdG8mcXVvdDs7CgovLyBNc2cgZGVmaW5lcyB0aGUgbW9kdWxlIE1zZyBzZXJ2aWNlLgpzZXJ2aWNlIE1zZyB7CiAgb3B0aW9uIChjb3Ntb3MubXNnLnYxLnNlcnZpY2UpID0gdHJ1ZTsKCiAgLy8gQ3JlYXRlR2FtZSBjcmVhdGUgYSBnYW1lLgogIHJwYyBDcmVhdGVHYW1lKE1zZ0NyZWF0ZUdhbWUpCiAgICByZXR1cm5zIChNc2dDcmVhdGVHYW1lUmVzcG9uc2UpOwp9CgovLyBNc2dDcmVhdGVHYW1lIGRlZmluZXMgdGhlIE1zZy9DcmVhdGVHYW1lIHJlcXVlc3QgdHlwZS4KbWVzc2FnZSBNc2dDcmVhdGVHYW1lIHsKICBvcHRpb24gKGNvc21vcy5tc2cudjEuc2lnbmVyKSA9ICZxdW90O2NyZWF0b3ImcXVvdDs7CgogIC8vIGNyZWF0b3IgaXMgdGhlIG1lc3NhZ2Ugc2VuZGVyLgogIHN0cmluZyBjcmVhdG9yID0gMTsKICBzdHJpbmcgaW5kZXggPSAyIDsKICBzdHJpbmcgYmxhY2sgPSAzIFsoY29zbW9zX3Byb3RvLnNjYWxhcikgPSAmcXVvdDtjb3Ntb3MuQWRkcmVzc1N0cmluZyZxdW90O107CiAgc3RyaW5nIHJlZCA9IDQgWyhjb3Ntb3NfcHJvdG8uc2NhbGFyKSA9ICZxdW90O2Nvc21vcy5BZGRyZXNzU3RyaW5nJnF1b3Q7XTsKfQoKLy8gTXNnQ3JlYXRlR2FtZVJlc3BvbnNlIGRlZmluZXMgdGhlIE1zZy9DcmVhdGVHYW1lIHJlc3BvbnNlIHR5cGUuCm1lc3NhZ2UgTXNnQ3JlYXRlR2FtZVJlc3BvbnNlIHt9Cg==",url:"https://github.com/b9lab/checkers-minimal/blob/create-game/proto/alice/checkers/v1/tx.proto"}}),e._v(" "),a("HighlightBox",{attrs:{type:"note"}},[a("ul",[a("li",[a("code",[e._v("MsgCreateGame")]),e._v(" does not mention "),a("code",[e._v("Board")]),e._v(" or "),a("code",[e._v("Turn")]),e._v(" as this (as mentioned) should not be under the control of the message sender.")]),e._v(" "),a("li",[e._v("The response is empty as there is no extra information to return. For instance, here the game index is known in advance.")]),e._v(" "),a("li",[a("code",[e._v("option (cosmos.msg.v1.signer)")]),e._v(" identifies "),a("code",[e._v("creator")]),e._v(" as the field that will serve as the signer. At compilation time, the SDK will automagically pick up the value of this annotation to have "),a("code",[e._v("MsgCreateGame")]),e._v(" implement "),a("code",[e._v("sdk.Msg.GetSigners")]),e._v(".")])])]),e._v(" "),a("h3",{attrs:{id:"compile-protobuf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#compile-protobuf"}},[e._v("#")]),e._v(" Compile Protobuf")]),e._v(" "),a("p",[e._v("Since you have defined a new message type and an associated "),a("code",[e._v("service")]),e._v(", you should recompile everything:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtYWtlIHByb3RvLWdlbgo="}}),e._v(" "),a("p",[e._v("In the new "),a("a",{attrs:{href:"https://github.com/b9lab/checkers-minimal/blob/create-game/tx.pb.go",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("tx.pg.go")]),a("OutboundLink")],1),e._v(", you can find "),a("a",{attrs:{href:"https://github.com/b9lab/checkers-minimal/blob/create-game/tx.pb.go#L34-L40",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("type MsgCreateGame struct")]),a("OutboundLink")],1),e._v(" and "),a("a",{attrs:{href:"https://github.com/b9lab/checkers-minimal/blob/create-game/tx.pb.go#L205-L208",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("type MsgServer interface")]),a("OutboundLink")],1),e._v(". Now you can use them closer to the keeper.")]),e._v(" "),a("h3",{attrs:{id:"new-message-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#new-message-server"}},[e._v("#")]),e._v(" New message server")]),e._v(" "),a("p",[e._v("Create a new file "),a("code",[e._v("keeper/msg_server.go")]),e._v(" and take inspiration from "),a("code",[e._v("minimal-module-example")]),e._v(". It needs to:")]),e._v(" "),a("ul",[a("li",[e._v("Check that the "),a("code",[e._v("Index")]),e._v(" is not too short or too long.")]),e._v(" "),a("li",[e._v("Check that the "),a("code",[e._v("Index")]),e._v(" is not already taken.")]),e._v(" "),a("li",[e._v("Create a new board with the game rules.")]),e._v(" "),a("li",[e._v("If valid, put the game into storage.")])]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBrZWVwZXIKCmltcG9ydCAoCiAgICAmcXVvdDtjb250ZXh0JnF1b3Q7CiAgICAmcXVvdDtlcnJvcnMmcXVvdDsKICAgICZxdW90O2ZtdCZxdW90OwoKICAgICZxdW90O2Nvc21vc3Nkay5pby9jb2xsZWN0aW9ucyZxdW90OwogICAgJnF1b3Q7Z2l0aHViLmNvbS9hbGljZS9jaGVja2VycyZxdW90OwogICAgJnF1b3Q7Z2l0aHViLmNvbS9hbGljZS9jaGVja2Vycy9ydWxlcyZxdW90OwopCgp0eXBlIG1zZ1NlcnZlciBzdHJ1Y3QgewogICAgayBLZWVwZXIKfQoKdmFyIF8gY2hlY2tlcnMuTXNnU2VydmVyID0gbXNnU2VydmVye30KCi8vIE5ld01zZ1NlcnZlckltcGwgcmV0dXJucyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgbW9kdWxlIE1zZ1NlcnZlciBpbnRlcmZhY2UuCmZ1bmMgTmV3TXNnU2VydmVySW1wbChrZWVwZXIgS2VlcGVyKSBjaGVja2Vycy5Nc2dTZXJ2ZXIgewogICAgcmV0dXJuICZhbXA7bXNnU2VydmVye2s6IGtlZXBlcn0KfQoKLy8gQ3JlYXRlR2FtZSBkZWZpbmVzIHRoZSBoYW5kbGVyIGZvciB0aGUgTXNnQ3JlYXRlR2FtZSBtZXNzYWdlLgpmdW5jIChtcyBtc2dTZXJ2ZXIpIENyZWF0ZUdhbWUoY3R4IGNvbnRleHQuQ29udGV4dCwgbXNnICpjaGVja2Vycy5Nc2dDcmVhdGVHYW1lKSAoKmNoZWNrZXJzLk1zZ0NyZWF0ZUdhbWVSZXNwb25zZSwgZXJyb3IpIHsKICAgIGlmIGxlbmd0aCA6PSBsZW4oW11ieXRlKG1zZy5JbmRleCkpOyBjaGVja2Vycy5NYXhJbmRleExlbmd0aCAmbHQ7IGxlbmd0aCB8fCBsZW5ndGggJmx0OyAxIHsKICAgICAgICByZXR1cm4gbmlsLCBjaGVja2Vycy5FcnJJbmRleFRvb0xvbmcKICAgIH0KICAgIGlmIF8sIGVyciA6PSBtcy5rLlN0b3JlZEdhbWVzLkdldChjdHgsIG1zZy5JbmRleCk7IGVyciA9PSBuaWwgfHwgZXJyb3JzLklzKGVyciwgY29sbGVjdGlvbnMuRXJyRW5jb2RpbmcpIHsKICAgICAgICByZXR1cm4gbmlsLCBmbXQuRXJyb3JmKCZxdW90O2dhbWUgYWxyZWFkeSBleGlzdHMgYXQgaW5kZXg6ICVzJnF1b3Q7LCBtc2cuSW5kZXgpCiAgICB9CgogICAgbmV3Qm9hcmQgOj0gcnVsZXMuTmV3KCkKICAgIHN0b3JlZEdhbWUgOj0gY2hlY2tlcnMuU3RvcmVkR2FtZXsKICAgICAgICBCb2FyZDogbmV3Qm9hcmQuU3RyaW5nKCksCiAgICAgICAgVHVybjogIHJ1bGVzLlBpZWNlU3RyaW5nc1tuZXdCb2FyZC5UdXJuXSwKICAgICAgICBCbGFjazogbXNnLkJsYWNrLAogICAgICAgIFJlZDogICBtc2cuUmVkLAogICAgfQogICAgaWYgZXJyIDo9IHN0b3JlZEdhbWUuVmFsaWRhdGUoKTsgZXJyICE9IG5pbCB7CiAgICAgICAgcmV0dXJuIG5pbCwgZXJyCiAgICB9CiAgICBpZiBlcnIgOj0gbXMuay5TdG9yZWRHYW1lcy5TZXQoY3R4LCBtc2cuSW5kZXgsIHN0b3JlZEdhbWUpOyBlcnIgIT0gbmlsIHsKICAgICAgICByZXR1cm4gbmlsLCBlcnIKICAgIH0KCiAgICByZXR1cm4gJmFtcDtjaGVja2Vycy5Nc2dDcmVhdGVHYW1lUmVzcG9uc2V7fSwgbmlsCn0K",url:"https://github.com/b9lab/checkers-minimal/blob/create-game/keeper/msg_server.go"}}),e._v(" "),a("HighlightBox",{attrs:{type:"note"}},[a("ul",[a("li",[e._v("The creator and its signature are not checked. This is not necessary, as the app has validated the transaction before sending the message.")]),e._v(" "),a("li",[e._v("The creator is not saved in storage. This is a design decision; you may in fact decide to keep the creator.")])])]),e._v(" "),a("h3",{attrs:{id:"register-the-types-in-the-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#register-the-types-in-the-module"}},[e._v("#")]),e._v(" Register the types in the module")]),e._v(" "),a("p",[e._v("Now that you have message types and server, you should register the types in the currently empty "),a("code",[e._v("codec.go")]),e._v(". Inspire yourself from what you find in "),a("code",[e._v("minimal-module-example")]),e._v(":")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-go",base64:"ICAgIHBhY2thZ2UgY2hlY2tlcnMKCiAgICBpbXBvcnQgKAogICAgICAgIHR5cGVzICZxdW90O2dpdGh1Yi5jb20vY29zbW9zL2Nvc21vcy1zZGsvY29kZWMvdHlwZXMmcXVvdDsKKyAgICAgIHNkayAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzJnF1b3Q7CisgICAgICAmcXVvdDtnaXRodWIuY29tL2Nvc21vcy9jb3Ntb3Mtc2RrL3R5cGVzL21zZ3NlcnZpY2UmcXVvdDsKICAgICkKCiAgICAvLyBSZWdpc3RlckludGVyZmFjZXMgcmVnaXN0ZXJzIHRoZSBpbnRlcmZhY2VzIHR5cGVzIHdpdGggdGhlIGludGVyZmFjZSByZWdpc3RyeS4KICAgIGZ1bmMgUmVnaXN0ZXJJbnRlcmZhY2VzKHJlZ2lzdHJ5IHR5cGVzLkludGVyZmFjZVJlZ2lzdHJ5KSB7CisgICAgICByZWdpc3RyeS5SZWdpc3RlckltcGxlbWVudGF0aW9ucygoKnNkay5Nc2cpKG5pbCksCisgICAgICAgICAgJmFtcDtNc2dDcmVhdGVHYW1le30sCisgICAgICApCisgICAgICBtc2dzZXJ2aWNlLlJlZ2lzdGVyTXNnU2VydmljZURlc2MocmVnaXN0cnksICZhbXA7X01zZ19zZXJ2aWNlRGVzYykKICAgIH0K",url:"https://github.com/b9lab/checkers-minimal/blob/create-game/codec.go#L5-L14"}}),e._v(" "),a("p",[e._v("In "),a("code",[e._v("module/module.go")]),e._v(", register the new service. The lines were previously commented out:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-go",base64:"ICAgIC4uLgogICAgZnVuYyAoYW0gQXBwTW9kdWxlKSBSZWdpc3RlclNlcnZpY2VzKGNmZyBtb2R1bGUuQ29uZmlndXJhdG9yKSB7CiAgICAgICAgLy8gUmVnaXN0ZXIgc2VydmVycwotICAgICAgLy8gY2hlY2tlcnMuUmVnaXN0ZXJNc2dTZXJ2ZXIoY2ZnLk1zZ1NlcnZlcigpLCBrZWVwZXIuTmV3TXNnU2VydmVySW1wbChhbS5rZWVwZXIpKQorICAgICAgY2hlY2tlcnMuUmVnaXN0ZXJNc2dTZXJ2ZXIoY2ZnLk1zZ1NlcnZlcigpLCBrZWVwZXIuTmV3TXNnU2VydmVySW1wbChhbS5rZWVwZXIpKQogICAgICAgIC8vIGNoZWNrZXJzLlJlZ2lzdGVyUXVlcnlTZXJ2ZXIoY2ZnLlF1ZXJ5U2VydmVyKCksIGtlZXBlci5OZXdRdWVyeVNlcnZlckltcGwoYW0ua2VlcGVyKSkKICAgICAgICAuLi4KICAgIH0KICAgIC4uLgo=",url:"https://github.com/b9lab/checkers-minimal/blob/create-game/module/module.go#L71"}}),e._v(" "),a("h3",{attrs:{id:"add-the-cli-commands"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-the-cli-commands"}},[e._v("#")]),e._v(" Add the CLI commands")]),e._v(" "),a("p",[e._v("At this stage, your module is able to handle messages passed to it by the app. However, you are not yet able to craft such messages in the first place. When working from the command line, this crafting is handled by the CLI client. The CLI client usually tells you what messages and transactions it can create when you run "),a("code",[e._v("minid tx --help")]),e._v(". Go ahead and check:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtYWtlIGluc3RhbGwKJCBtaW5pZCB0eCAtLWhlbHAK"}}),e._v(" "),a("p",[e._v("You can see that "),a("code",[e._v("checkers")]),e._v(" is missing from the list of available commands. Fix that by entering your desired command in "),a("code",[e._v("module/autocli.go")]),e._v(". Taking inspiration from "),a("code",[e._v("minimal-module-example")]),e._v(":")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-go",base64:"ICAgIGltcG9ydCAoCiAgICAgICAgYXV0b2NsaXYxICZxdW90O2Nvc21vc3Nkay5pby9hcGkvY29zbW9zL2F1dG9jbGkvdjEmcXVvdDsKKyAgICAgIGNoZWNrZXJzdjEgJnF1b3Q7Z2l0aHViLmNvbS9hbGljZS9jaGVja2Vycy9hcGkvdjEmcXVvdDsKICAgICkKICAgIGZ1bmMgKGFtIEFwcE1vZHVsZSkgQXV0b0NMSU9wdGlvbnMoKSAqYXV0b2NsaXYxLk1vZHVsZU9wdGlvbnMgewogICAgICAgIHJldHVybiAmYW1wO2F1dG9jbGl2MS5Nb2R1bGVPcHRpb25zewogICAgICAgICAgICBRdWVyeTogbmlsLCAgICAKLSAgICAgICAgICBUeDogbmlsLAorICAgICAgICAgIFR4OiAmYW1wO2F1dG9jbGl2MS5TZXJ2aWNlQ29tbWFuZERlc2NyaXB0b3J7CisgICAgICAgICAgICAgIFNlcnZpY2U6IGNoZWNrZXJzdjEuTXNnX1NlcnZpY2VEZXNjLlNlcnZpY2VOYW1lLAorICAgICAgICAgICAgICBScGNDb21tYW5kT3B0aW9uczogW10qYXV0b2NsaXYxLlJwY0NvbW1hbmRPcHRpb25zeworICAgICAgICAgICAgICAgICAgeworICAgICAgICAgICAgICAgICAgICAgIFJwY01ldGhvZDogJnF1b3Q7Q3JlYXRlR2FtZSZxdW90OywKKyAgICAgICAgICAgICAgICAgICAgICBVc2U6ICAgICAgICZxdW90O2NyZWF0ZSBpbmRleCBibGFjayByZWQmcXVvdDssCisgICAgICAgICAgICAgICAgICAgICAgU2hvcnQ6ICAgICAmcXVvdDtDcmVhdGVzIGEgbmV3IGNoZWNrZXJzIGdhbWUgYXQgdGhlIGluZGV4IGZvciB0aGUgYmxhY2sgYW5kIHJlZCBwbGF5ZXJzJnF1b3Q7LAorICAgICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uYWxBcmdzOiBbXSphdXRvY2xpdjEuUG9zaXRpb25hbEFyZ0Rlc2NyaXB0b3J7CisgICAgICAgICAgICAgICAgICAgICAgICAgIHtQcm90b0ZpZWxkOiAmcXVvdDtpbmRleCZxdW90O30sCisgICAgICAgICAgICAgICAgICAgICAgICAgIHtQcm90b0ZpZWxkOiAmcXVvdDtibGFjayZxdW90O30sCisgICAgICAgICAgICAgICAgICAgICAgICAgIHtQcm90b0ZpZWxkOiAmcXVvdDtyZWQmcXVvdDt9LAorICAgICAgICAgICAgICAgICAgICAgIH0sCisgICAgICAgICAgICAgICAgICB9LAorICAgICAgICAgICAgICB9LAorICAgICAgICAgIH0sCiAgICAgICAgfQogICAgfQo=",url:"https://github.com/b9lab/checkers-minimal/blob/create-game/module/autocli.go#L12-L26"}}),e._v(" "),a("HighlightBox",{attrs:{type:"note"}},[a("p",[e._v("Note that the "),a("code",[e._v("create")]),e._v(" in "),a("code",[e._v('"create index black red"')]),e._v(" is parsed out and used as the command in the "),a("code",[e._v("minid tx checkers create")]),e._v(" command-line.")])]),e._v(" "),a("h2",{attrs:{id:"test-again"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#test-again"}},[e._v("#")]),e._v(" Test again")]),e._v(" "),a("p",[e._v("Back in the minimal chain, compile to see the command that was added:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtYWtlIGluc3RhbGwK"}}),e._v(" "),a("p",[e._v("Now you should see the "),a("code",[e._v("create")]),e._v(" command:")]),e._v(" "),a("CodeGroup",[a("CodeGroupItem",{attrs:{title:"tx"}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtaW5pZCB0eCAtLWhlbHAK"}}),e._v(" "),a("p",[e._v("Lists:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"txt",base64:"Li4uCmNoZWNrZXJzICAgICAgICAgICAgVHJhbnNhY3Rpb25zIGNvbW1hbmRzIGZvciB0aGUgY2hlY2tlcnMgbW9kdWxlCi4uLgo="}})],1),e._v(" "),a("CodeGroupItem",{attrs:{title:"checkers"}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtaW5pZCB0eCBjaGVja2VycyAtLWhlbHAK"}}),e._v(" "),a("p",[e._v("This returns:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"txt",base64:"Li4uCkF2YWlsYWJsZSBDb21tYW5kczoKICBjcmVhdGUgICAgICBDcmVhdGVzIGEgbmV3IGNoZWNrZXJzIGdhbWUgYXQgdGhlIGluZGV4IGZvciB0aGUgYmxhY2sgYW5kIHJlZCBwbGF5ZXJzCi4uLgo="}})],1),e._v(" "),a("CodeGroupItem",{attrs:{title:"create"}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtaW5pZCB0eCBjaGVja2VycyBjcmVhdGUgLS1oZWxwCg=="}}),e._v(" "),a("p",[e._v("This returns:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"txt",base64:"Q3JlYXRlcyBhIG5ldyBjaGVja2VycyBnYW1lIGF0IHRoZSBpbmRleCBmb3IgdGhlIGJsYWNrIGFuZCByZWQgcGxheWVycwoKVXNhZ2U6CiAgbWluaWQgdHggY2hlY2tlcnMgY3JlYXRlIGluZGV4IGJsYWNrIHJlZCBbZmxhZ3NdCgpGbGFnczoKLi4uCg=="}})],1)],1),e._v(" "),a("hr"),e._v(" "),a("p",[e._v("Just like you did in the "),a("RouterLink",{attrs:{to:"/hands-on-exercise/0-native/1-preparation.html"}},[e._v("previous section")]),e._v(", re-initialize and start it. You need to re-initialize because your genesis has changed once again:")],1),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtYWtlIGluaXQKJCBtaW5pZCBzdGFydAo="}}),e._v(" "),a("p",[e._v("Now create a game from another shell. First list "),a("code",[e._v("alice")]),e._v(" and "),a("code",[e._v("bob")]),e._v("'s addresses as created by "),a("code",[e._v("make init")]),e._v(":")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtaW5pZCBrZXlzIGxpc3QgLS1rZXlyaW5nLWJhY2tlbmQgdGVzdAo="}}),e._v(" "),a("p",[e._v("This returns something like:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"yaml",base64:"LSBhZGRyZXNzOiBtaW5pMTZham51czNoaHBjc2ZxZW01NW01YXdmM21md2Z2aHBwMzZyYzdkCiAgbmFtZTogYWxpY2UKICBwdWJrZXk6ICd7JnF1b3Q7QHR5cGUmcXVvdDs6JnF1b3Q7L2Nvc21vcy5jcnlwdG8uc2VjcDI1NmsxLlB1YktleSZxdW90OywmcXVvdDtrZXkmcXVvdDs6JnF1b3Q7QTBnVU50WHBCcWdnVGRuVklDcjA0R0hxSVFPYTNaRXBqQWhuNTA4ODlBUVgmcXVvdDt9JwogIHR5cGU6IGxvY2FsCi0gYWRkcmVzczogbWluaTFodjg1eTZoNXJrcXhnc2hjeXpwbjJ6cmFsbW1jZ25xd3NqbjNxZwogIG5hbWU6IGJvYgogIHB1YmtleTogJ3smcXVvdDtAdHlwZSZxdW90OzomcXVvdDsvY29zbW9zLmNyeXB0by5zZWNwMjU2azEuUHViS2V5JnF1b3Q7LCZxdW90O2tleSZxdW90OzomcXVvdDtBclhMbHhVczJnRXc4K2NscVBwNllvVk5teTM2UHJKN2FZYlYrVzhHcmNuUSZxdW90O30nCiAgdHlwZTogbG9jYWwK"}}),e._v(" "),a("p",[e._v("With this information, you can send your first "),a("em",[e._v("create game")]),e._v(" message:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtaW5pZCB0eCBjaGVja2VycyBjcmVhdGUgaWQxIFwKICAgIG1pbmkxNmFqbnVzM2hocGNzZnFlbTU1bTVhd2YzbWZ3ZnZocHAzNnJjN2QgXAogICAgbWluaTFodjg1eTZoNXJrcXhnc2hjeXpwbjJ6cmFsbW1jZ25xd3NqbjNxZyBcCiAgICAtLWZyb20gYWxpY2UgLS15ZXMK"}}),e._v(" "),a("p",[e._v("This returns you the transaction hash as expected. To find what was put in storage, wait a bit and then stop the chain with "),a("kbd",[e._v("CTRL-C")]),e._v(". Now call up:")]),e._v(" "),a("CodeGroup",[a("CodeGroupItem",{attrs:{title:"Straight"}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtaW5pZCBleHBvcnQK"}})],1),e._v(" "),a("CodeGroupItem",{attrs:{title:"Clean"}},[a("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtaW5pZCBleHBvcnQgfCB0YWlsIC1uIDEgfCBqcQo="}})],1)],1),e._v(" "),a("p",[e._v("This should return something with:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-json",base64:"ICAgIC4uLgogICAgJnF1b3Q7Y2hlY2tlcnMmcXVvdDs6IHsKICAgICAgJnF1b3Q7cGFyYW1zJnF1b3Q7OiB7fSwKLSAgICAmcXVvdDtpbmRleGVkU3RvcmVkR2FtZUxpc3QmcXVvdDs6IFtdCisgICAgJnF1b3Q7aW5kZXhlZFN0b3JlZEdhbWVMaXN0JnF1b3Q7OiBbCisgICAgICB7CisgICAgICAgICZxdW90O2luZGV4JnF1b3Q7OiAmcXVvdDtpZDEmcXVvdDssCisgICAgICAgICZxdW90O3N0b3JlZEdhbWUmcXVvdDs6IHsKKyAgICAgICAgICAmcXVvdDtib2FyZCZxdW90OzogJnF1b3Q7KmIqYipiKmJ8YipiKmIqYip8KmIqYipiKmJ8KioqKioqKip8KioqKioqKip8cipyKnIqcip8KnIqcipyKnJ8cipyKnIqciomcXVvdDssCisgICAgICAgICAgJnF1b3Q7dHVybiZxdW90OzogJnF1b3Q7YiZxdW90OywKKyAgICAgICAgICAmcXVvdDtibGFjayZxdW90OzogJnF1b3Q7bWluaTE2YWpudXMzaGhwY3NmcWVtNTVtNWF3ZjNtZndmdmhwcDM2cmM3ZCZxdW90OywKKyAgICAgICAgICAmcXVvdDtyZWQmcXVvdDs6ICZxdW90O21pbmkxaHY4NXk2aDVya3F4Z3NoY3l6cG4yenJhbG1tY2ducXdzam4zcWcmcXVvdDsKKyAgICAgICAgfQorICAgICAgfQorICAgIF0KICAgIH0sCiAgICAuLi4K"}}),e._v(" "),a("p",[e._v("This means you can get a full exported genesis.")]),e._v(" "),a("h2",{attrs:{id:"up-next"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#up-next"}},[e._v("#")]),e._v(" Up next")]),e._v(" "),a("p",[e._v("If you run "),a("code",[e._v("minid query --help")]),e._v(", you can see that there is no "),a("code",[e._v("checkers")]),e._v(" in the list of commands. So although you can create games, you cannot retrieve them yet without dumping the whole storage.")]),e._v(" "),a("p",[e._v("Fixing this is the object of the next section.")])],1)}),[],!1,null,null,null);t.default=g.exports}}]);