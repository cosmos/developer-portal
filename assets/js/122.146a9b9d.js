(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{741:function(e,t,g){"use strict";g.r(t);var a=g(1),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,g=e._self._c||t;return g("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[g("h1",{attrs:{id:"add-your-first-object"}},[g("a",{staticClass:"header-anchor",attrs:{href:"#add-your-first-object"}},[e._v("#")]),e._v(" Add Your First Object")]),e._v(" "),g("p",[e._v("After the "),g("RouterLink",{attrs:{to:"/hands-on-exercise/0-native/2-build-module.html"}},[e._v("previous section")]),e._v(", you have a somewhat empty checkers module integrated in a minimal app. It is now time to:")],1),e._v(" "),g("ul",[g("li",[e._v("Add a game storage type.")]),e._v(" "),g("li",[e._v("Compile Protobuf.")]),e._v(" "),g("li",[e._v("Add the necessary keeper functions.")])]),e._v(" "),g("h2",{attrs:{id:"the-game-rules"}},[g("a",{staticClass:"header-anchor",attrs:{href:"#the-game-rules"}},[e._v("#")]),e._v(" The game rules")]),e._v(" "),g("p",[e._v("A good start to developing a checkers blockchain is to define the rule set of the game. There are many versions of the rules. Choose "),g("a",{attrs:{href:"https://www.ducksters.com/games/checkers_rules.php",target:"_blank",rel:"noopener noreferrer"}},[e._v("a very simple set of basic rules"),g("OutboundLink")],1),e._v(" to avoid getting lost in the rules of checkers or the proper implementation of the board state.")]),e._v(" "),g("p",[e._v("Use "),g("a",{attrs:{href:"https://github.com/batkinson/checkers-go/blob/a09daeb/checkers/checkers.go",target:"_blank",rel:"noopener noreferrer"}},[e._v("a ready-made implementation"),g("OutboundLink")],1),e._v(" with the additional rule that the board is 8x8, is played on black cells, and black plays first. This code will not need adjustments. Copy this rules file into a new "),g("code",[e._v("rules")]),e._v(" folder inside the root folder of your "),g("code",[e._v("checkers-minimal")]),e._v(" module. Change its package from "),g("code",[e._v("checkers")]),e._v(" to "),g("code",[e._v("rules")]),e._v(". You can do this by command-line:")]),e._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBta2RpciBydWxlcwokIGN1cmwgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2JhdGtpbnNvbi9jaGVja2Vycy1nby9hMDlkYWViMTU0OGRkNGNjMDE0NWQ4N2M4ZGEzZWQyZWEzM2E2MmUzL2NoZWNrZXJzL2NoZWNrZXJzLmdvIHwgc2VkICdzL3BhY2thZ2UgY2hlY2tlcnMvcGFja2FnZSBydWxlcy8nICZndDsgcnVsZXMvY2hlY2tlcnMuZ28K"}}),e._v(" "),g("h2",{attrs:{id:"a-stored-game-object"}},[g("a",{staticClass:"header-anchor",attrs:{href:"#a-stored-game-object"}},[e._v("#")]),e._v(" A stored game object")]),e._v(" "),g("p",[e._v("With the rules in place, begin with the minimum game information needed to be stored.")]),e._v(" "),g("h3",{attrs:{id:"the-game-object-type"}},[g("a",{staticClass:"header-anchor",attrs:{href:"#the-game-object-type"}},[e._v("#")]),e._v(" The game object type")]),e._v(" "),g("p",[e._v("You need:")]),e._v(" "),g("ul",[g("li",[g("strong",[e._v("Index:")]),e._v(" A string, so it can be identified and retrieved from storage.")]),e._v(" "),g("li",[g("strong",[e._v("Black player:")]),e._v(" A string, the serialized address.")]),e._v(" "),g("li",[g("strong",[e._v("Red player:")]),e._v(" A string, the serialized address.")]),e._v(" "),g("li",[g("strong",[e._v("Board proper:")]),e._v(" A string, the board as it is serialized by the "),g("em",[e._v("rules")]),e._v(" file.")]),e._v(" "),g("li",[g("strong",[e._v("Player to play next:")]),e._v(" A string, specifying whose "),g("em",[e._v("turn")]),e._v(" it is.")])]),e._v(" "),g("HighlightBox",{attrs:{type:"remember"}},[g("p",[e._v("When you save strings, it makes it easier to understand what comes straight out of storage but at the expense of storage space. As an advanced consideration, you could store the same information in binary.")])]),e._v(" "),g("p",[e._v("As ever, taking inspiration from "),g("code",[e._v("minimal-module-example")]),e._v(", this can be described in "),g("code",[e._v("proto/../types.proto")]),e._v(" with:")]),e._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-protobuf",base64:"ICAgIG1lc3NhZ2UgR2VuZXNpc1N0YXRlIHsKICAgICAgLy8gcGFyYW1zIGRlZmluZXMgYWxsIHRoZSBwYXJhbWV0ZXJzIG9mIHRoZSBtb2R1bGUuCiAgICAgIFBhcmFtcyBwYXJhbXMgPSAxIFsgKGdvZ29wcm90by5udWxsYWJsZSkgPSBmYWxzZSBdOwogICAgfQoKKyAgbWVzc2FnZSBTdG9yZWRHYW1lIHsKKyAgICBzdHJpbmcgYm9hcmQgPSAxOworICAgIHN0cmluZyB0dXJuID0gMjsKKyAgICBzdHJpbmcgYmxhY2sgPSAzIFsoY29zbW9zX3Byb3RvLnNjYWxhcikgPSAmcXVvdDtjb3Ntb3MuQWRkcmVzc1N0cmluZyZxdW90O107CisgICAgc3RyaW5nIHJlZCA9IDQgWyhjb3Ntb3NfcHJvdG8uc2NhbGFyKSA9ICZxdW90O2Nvc21vcy5BZGRyZXNzU3RyaW5nJnF1b3Q7XTsKKyAgfQo=",url:"https://github.com/b9lab/checkers-minimal/blob/stored-game/proto/alice/checkers/v1/types.proto#L18-L23"}}),e._v(" "),g("HighlightBox",{attrs:{type:"note"}},[g("p",[e._v("Since "),g("strong",[e._v("Index")]),e._v(" is used to store and retrieve the stored game, it does not need to be saved to storage. This saves precious storage space.")])]),e._v(" "),g("p",[e._v("Compile it:")]),e._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtYWtlIHByb3RvLWdlbgo="}}),e._v(" "),g("p",[e._v("Now that you have the individual stored game structure, you can define how it is kept in storage.")]),e._v(" "),g("h3",{attrs:{id:"the-storage-structure"}},[g("a",{staticClass:"header-anchor",attrs:{href:"#the-storage-structure"}},[e._v("#")]),e._v(" The storage structure")]),e._v(" "),g("p",[e._v("The way that makes sense is to keep a "),g("strong",[e._v("map")]),e._v(" of games in storage (and controled by the keeper), and rely on the SDK's basic structures to optimize saving and retrieving.")]),e._v(" "),g("p",[e._v("However, the genesis takes a "),g("strong",[e._v("list")]),e._v(", and in this list, the games need to be identified by their index.")]),e._v(" "),g("p",[e._v("To achieve that, you create a composed type that is used in the genesis state.")]),e._v(" "),g("p",[e._v("Update your "),g("code",[e._v("GenesisState")]),e._v(" in "),g("code",[e._v("types.proto")]),e._v(":")]),e._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-protobuf",base64:"ICAgIG1lc3NhZ2UgR2VuZXNpc1N0YXRlIHsKICAgICAgLy8gcGFyYW1zIGRlZmluZXMgYWxsIHRoZSBwYXJhbWV0ZXJzIG9mIHRoZSBtb2R1bGUuCiAgICAgIFBhcmFtcyBwYXJhbXMgPSAxIFsgKGdvZ29wcm90by5udWxsYWJsZSkgPSBmYWxzZV07CgorICAgIHJlcGVhdGVkIEluZGV4ZWRTdG9yZWRHYW1lIGluZGV4ZWRTdG9yZWRHYW1lTGlzdCA9IDIgWyhnb2dvcHJvdG8ubnVsbGFibGUpID0gZmFsc2VdOwogICAgfQoKICAgIG1lc3NhZ2UgU3RvcmVkR2FtZSB7CiAgICAgIC4uLgogICAgfQoKKyAgbWVzc2FnZSBJbmRleGVkU3RvcmVkR2FtZSB7CisgICAgc3RyaW5nIGluZGV4ID0gMTsKKyAgICBTdG9yZWRHYW1lIHN0b3JlZEdhbWUgPSAyIFsoZ29nb3Byb3RvLm51bGxhYmxlKSA9IGZhbHNlXTsKKyAgfQoK",url:"https://github.com/b9lab/checkers-minimal/blob/genesis-games/proto/alice/checkers/v1/types.proto#L17-L30"}}),e._v(" "),g("p",[e._v("Now recompile.")]),e._v(" "),g("h3",{attrs:{id:"add-validation"}},[g("a",{staticClass:"header-anchor",attrs:{href:"#add-validation"}},[e._v("#")]),e._v(" Add validation")]),e._v(" "),g("p",[e._v("You can consider adding functions on the "),g("code",[e._v("StoredGame")]),e._v(", for instance a "),g("code",[e._v("Validate")]),e._v(" one.")]),e._v(" "),g("p",[e._v("Additionally, you need to:")]),e._v(" "),g("ul",[g("li",[e._v("Make sure that the "),g("code",[e._v("Index")]),e._v(" byte count remains within reasonable bounds, for instance less than 256 bytes.")]),e._v(" "),g("li",[e._v("Make sure that the genesis does not pass games with conflicting indices.")])]),e._v(" "),g("p",[e._v("Start with a new "),g("code",[e._v("errors.go")]),e._v(" file in the root folder of your "),g("code",[e._v("checkers-minimal")]),e._v(" module and a new "),g("code",[e._v("stored-game.go")]),e._v(" to contain relevant functions:")]),e._v(" "),g("CodeGroup",[g("CodeGroupItem",{attrs:{title:"keys.go"}},[g("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-go",base64:"ICAgIGNvbnN0IE1vZHVsZU5hbWUgPSAmcXVvdDtjaGVja2VycyZxdW90OworICBjb25zdCBNYXhJbmRleExlbmd0aCA9IDI1Ngo=",url:"https://github.com/b9lab/checkers-minimal/blob/game-validation/keys.go#L6"}})],1),e._v(" "),g("CodeGroupItem",{attrs:{title:"errors.go"}},[g("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBjaGVja2VycwoKaW1wb3J0ICZxdW90O2Nvc21vc3Nkay5pby9lcnJvcnMmcXVvdDsKCnZhciAoCiAgICBFcnJJbmRleFRvb0xvbmcgICAgID0gZXJyb3JzLlJlZ2lzdGVyKE1vZHVsZU5hbWUsIDIsICZxdW90O2luZGV4IHRvbyBsb25nJnF1b3Q7KQogICAgRXJyRHVwbGljYXRlQWRkcmVzcyA9IGVycm9ycy5SZWdpc3RlcihNb2R1bGVOYW1lLCAzLCAmcXVvdDtkdXBsaWNhdGUgYWRkcmVzcyZxdW90OykKICAgIEVyckludmFsaWRCbGFjayAgICAgPSBlcnJvcnMuUmVnaXN0ZXIoTW9kdWxlTmFtZSwgNCwgJnF1b3Q7YmxhY2sgYWRkcmVzcyBpcyBpbnZhbGlkOiAlcyZxdW90OykKICAgIEVyckludmFsaWRSZWQgICAgICAgPSBlcnJvcnMuUmVnaXN0ZXIoTW9kdWxlTmFtZSwgNSwgJnF1b3Q7cmVkIGFkZHJlc3MgaXMgaW52YWxpZDogJXMmcXVvdDspCiAgICBFcnJHYW1lTm90UGFyc2VhYmxlID0gZXJyb3JzLlJlZ2lzdGVyKE1vZHVsZU5hbWUsIDYsICZxdW90O2dhbWUgY2Fubm90IGJlIHBhcnNlZCZxdW90OykKKQo=",url:"https://github.com/b9lab/checkers-minimal/blob/game-validation/errors.go"}})],1),e._v(" "),g("CodeGroupItem",{attrs:{title:"stored-game.go"}},[g("p",[e._v("Next, in a new "),g("code",[e._v("stored-game.go")]),e._v(" file:")]),e._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"cGFja2FnZSBjaGVja2VycwoKaW1wb3J0ICgKICAgIGZtdCAmcXVvdDtmbXQmcXVvdDsKCiAgICAmcXVvdDtjb3Ntb3NzZGsuaW8vZXJyb3JzJnF1b3Q7CiAgICAmcXVvdDtnaXRodWIuY29tL2FsaWNlL2NoZWNrZXJzL3J1bGVzJnF1b3Q7CiAgICBzZGsgJnF1b3Q7Z2l0aHViLmNvbS9jb3Ntb3MvY29zbW9zLXNkay90eXBlcyZxdW90OwopCgpmdW5jIChzdG9yZWRHYW1lIFN0b3JlZEdhbWUpIEdldEJsYWNrQWRkcmVzcygpIChibGFjayBzZGsuQWNjQWRkcmVzcywgZXJyIGVycm9yKSB7CiAgICBibGFjaywgZXJyQmxhY2sgOj0gc2RrLkFjY0FkZHJlc3NGcm9tQmVjaDMyKHN0b3JlZEdhbWUuQmxhY2spCiAgICByZXR1cm4gYmxhY2ssIGVycm9ycy5XcmFwZihlcnJCbGFjaywgRXJySW52YWxpZEJsYWNrLkVycm9yKCksIHN0b3JlZEdhbWUuQmxhY2spCn0KCmZ1bmMgKHN0b3JlZEdhbWUgU3RvcmVkR2FtZSkgR2V0UmVkQWRkcmVzcygpIChyZWQgc2RrLkFjY0FkZHJlc3MsIGVyciBlcnJvcikgewogICAgcmVkLCBlcnJSZWQgOj0gc2RrLkFjY0FkZHJlc3NGcm9tQmVjaDMyKHN0b3JlZEdhbWUuUmVkKQogICAgcmV0dXJuIHJlZCwgZXJyb3JzLldyYXBmKGVyclJlZCwgRXJySW52YWxpZFJlZC5FcnJvcigpLCBzdG9yZWRHYW1lLlJlZCkKfQoKZnVuYyAoc3RvcmVkR2FtZSBTdG9yZWRHYW1lKSBQYXJzZUdhbWUoKSAoZ2FtZSAqcnVsZXMuR2FtZSwgZXJyIGVycm9yKSB7CiAgICBib2FyZCwgZXJyQm9hcmQgOj0gcnVsZXMuUGFyc2Uoc3RvcmVkR2FtZS5Cb2FyZCkKICAgIGlmIGVyckJvYXJkICE9IG5pbCB7CiAgICAgICAgcmV0dXJuIG5pbCwgZXJyb3JzLldyYXBmKGVyckJvYXJkLCBFcnJHYW1lTm90UGFyc2VhYmxlLkVycm9yKCkpCiAgICB9CiAgICBib2FyZC5UdXJuID0gcnVsZXMuU3RyaW5nUGllY2VzW3N0b3JlZEdhbWUuVHVybl0uUGxheWVyCiAgICBpZiBib2FyZC5UdXJuLkNvbG9yID09ICZxdW90OyZxdW90OyB7CiAgICAgICAgcmV0dXJuIG5pbCwgZXJyb3JzLldyYXBmKGZtdC5FcnJvcmYoJnF1b3Q7dHVybjogJXMmcXVvdDssIHN0b3JlZEdhbWUuVHVybiksIEVyckdhbWVOb3RQYXJzZWFibGUuRXJyb3IoKSkKICAgIH0KICAgIHJldHVybiBib2FyZCwgbmlsCn0KCmZ1bmMgKHN0b3JlZEdhbWUgU3RvcmVkR2FtZSkgVmFsaWRhdGUoKSAoZXJyIGVycm9yKSB7CiAgICBfLCBlcnIgPSBzdG9yZWRHYW1lLkdldEJsYWNrQWRkcmVzcygpCiAgICBpZiBlcnIgIT0gbmlsIHsKICAgICAgICByZXR1cm4gZXJyCiAgICB9CiAgICBfLCBlcnIgPSBzdG9yZWRHYW1lLkdldFJlZEFkZHJlc3MoKQogICAgaWYgZXJyICE9IG5pbCB7CiAgICAgICAgcmV0dXJuIGVycgogICAgfQogICAgXywgZXJyID0gc3RvcmVkR2FtZS5QYXJzZUdhbWUoKQogICAgcmV0dXJuIGVycgp9Cg==",url:"https://github.com/b9lab/checkers-minimal/blob/game-validation/stored-game.go"}})],1)],1),e._v(" "),g("p",[e._v("With these additions, you can validate the games in "),g("code",[e._v("genesis.go")]),e._v(":")]),e._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-go",base64:"ICAgIGZ1bmMgKGdzICpHZW5lc2lzU3RhdGUpIFZhbGlkYXRlKCkgZXJyb3IgewogICAgICAgIGlmIGVyciA6PSBncy5QYXJhbXMuVmFsaWRhdGUoKTsgZXJyICE9IG5pbCB7CiAgICAgICAgICAgIHJldHVybiBlcnIKICAgICAgICB9CgorICAgICAgdW5pcXVlIDo9IG1ha2UobWFwW3N0cmluZ11ib29sKQorICAgICAgZm9yIF8sIGluZGV4ZWRTdG9yZWRHYW1lIDo9IHJhbmdlIGdzLkluZGV4ZWRTdG9yZWRHYW1lTGlzdCB7CisgICAgICAgICAgaWYgbGVuZ3RoIDo9IGxlbihbXWJ5dGUoaW5kZXhlZFN0b3JlZEdhbWUuSW5kZXgpKTsgTWF4SW5kZXhMZW5ndGggJmx0OyBsZW5ndGggfHwgbGVuZ3RoICZsdDsgMSB7CisgICAgICAgICAgICAgIHJldHVybiBFcnJJbmRleFRvb0xvbmcKKyAgICAgICAgICB9CisgICAgICAgICAgaWYgXywgb2sgOj0gdW5pcXVlW2luZGV4ZWRTdG9yZWRHYW1lLkluZGV4XTsgb2sgeworICAgICAgICAgICAgICByZXR1cm4gRXJyRHVwbGljYXRlQWRkcmVzcworICAgICAgICAgIH0KKyAgICAgICAgICBpZiBlcnIgOj0gaW5kZXhlZFN0b3JlZEdhbWUuU3RvcmVkR2FtZS5WYWxpZGF0ZSgpOyBlcnIgIT0gbmlsIHsKKyAgICAgICAgICAgICAgcmV0dXJuIGVycgorICAgICAgICAgIH0KKyAgICAgICAgICB1bmlxdWVbaW5kZXhlZFN0b3JlZEdhbWUuSW5kZXhdID0gdHJ1ZQorICAgICAgfQoKICAgICAgICByZXR1cm4gbmlsCiAgICB9Cg==",url:"https://github.com/b9lab/checkers-minimal/blob/game-validation/genesis.go#L16-L28"}}),e._v(" "),g("p",[e._v("With the basics of genesis and validation handled, shift focus to the keeper to have it handle this storage too.")]),e._v(" "),g("h3",{attrs:{id:"adjust-the-keeper-files"}},[g("a",{staticClass:"header-anchor",attrs:{href:"#adjust-the-keeper-files"}},[e._v("#")]),e._v(" Adjust the keeper files")]),e._v(" "),g("p",[e._v("In order to declare the stored games as a map, you first need to define a map key in "),g("code",[e._v("keys.go")]),e._v(":")]),e._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-go",base64:"ICAgIHZhciAoCiAgICAgICAgUGFyYW1zS2V5ICAgICAgPSBjb2xsZWN0aW9ucy5OZXdQcmVmaXgoJnF1b3Q7UGFyYW1zJnF1b3Q7KQorICAgICAgU3RvcmVkR2FtZXNLZXkgPSBjb2xsZWN0aW9ucy5OZXdQcmVmaXgoJnF1b3Q7U3RvcmVkR2FtZXMvdmFsdWUvJnF1b3Q7KQogICAgKQo=",url:"https://github.com/b9lab/checkers-minimal/blob/keeper-games/keys.go#L10"}}),e._v(" "),g("p",[e._v("Then declare its type in the keeper struct in "),g("code",[e._v("keeper/keeper.go")]),e._v(":")]),e._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-go",base64:"ICAgIHR5cGUgS2VlcGVyIHN0cnVjdCB7CiAgICAgICAgLi4uCiAgICAgICAgUGFyYW1zICAgICAgY29sbGVjdGlvbnMuSXRlbVtjaGVja2Vycy5QYXJhbXNdCisgICAgICBTdG9yZWRHYW1lcyBjb2xsZWN0aW9ucy5NYXBbc3RyaW5nLCBjaGVja2Vycy5TdG9yZWRHYW1lXQogICAgfQo=",url:"https://github.com/b9lab/checkers-minimal/blob/keeper-games/keeper/keeper.go#L25"}}),e._v(" "),g("p",[e._v("And then initialize the storage access, taking inspiration from "),g("code",[e._v("minimal-module-example")]),e._v(":")]),e._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-go",base64:"ICAgIC4uLgogICAgayA6PSBLZWVwZXJ7CiAgICAgICAgLi4uCiAgICAgICAgUGFyYW1zOiAgICAgIGNvbGxlY3Rpb25zLk5ld0l0ZW0oc2IsIGNoZWNrZXJzLlBhcmFtc0tleSwgJnF1b3Q7cGFyYW1zJnF1b3Q7LCBjb2RlYy5Db2xsVmFsdWVbY2hlY2tlcnMuUGFyYW1zXShjZGMpKSwKKyAgICAgIFN0b3JlZEdhbWVzOiBjb2xsZWN0aW9ucy5OZXdNYXAoc2IsCisgICAgICAgICAgY2hlY2tlcnMuU3RvcmVkR2FtZXNLZXksICZxdW90O3N0b3JlZEdhbWVzJnF1b3Q7LCBjb2xsZWN0aW9ucy5TdHJpbmdLZXksCisgICAgICAgICAgY29kZWMuQ29sbFZhbHVlW2NoZWNrZXJzLlN0b3JlZEdhbWVdKGNkYykpLAogICAgfQogICAgLi4uCg==",url:"https://github.com/b9lab/checkers-minimal/blob/keeper-games/keeper/keeper.go#L40-L42"}}),e._v(" "),g("HighlightBox",{attrs:{type:"tip"}},[g("p",[e._v("What this initialization does is explained "),g("a",{attrs:{href:"https://docs.cosmos.network/v0.50/build/packages/collections",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),g("OutboundLink")],1),e._v(":")]),e._v(" "),g("blockquote",[g("p",[e._v("Collections is a library meant to simplify your experience with respect to module state handling.")])]),e._v(" "),g("p",[e._v("The "),g("code",[e._v("codec.CollValue")]),e._v(" construct is covered "),g("a",{attrs:{href:"https://docs.cosmos.network/v0.50/build/packages/collections#key-and-value-codecs",target:"_blank",rel:"noopener noreferrer"}},[e._v("in the documentation"),g("OutboundLink")],1),e._v(".")])]),e._v(" "),g("p",[e._v("Do not forget the genesis manipulation to and from storage in "),g("code",[e._v("keeper/genesis.go")]),e._v(", again taking inspiration from "),g("code",[e._v("minimal-module-example")]),e._v(":")]),e._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-go",base64:"ICAgIGZ1bmMgKGsgKktlZXBlcikgSW5pdEdlbmVzaXMoY3R4IGNvbnRleHQuQ29udGV4dCwgZGF0YSAqY2hlY2tlcnMuR2VuZXNpc1N0YXRlKSBlcnJvciB7CiAgICAgICAgaWYgZXJyIDo9IGsuUGFyYW1zLlNldChjdHgsIGRhdGEuUGFyYW1zKTsgZXJyICE9IG5pbCB7CiAgICAgICAgICAgIHJldHVybiBlcnIKICAgICAgICB9CgorICAgICAgZm9yIF8sIGluZGV4ZWRTdG9yZWRHYW1lIDo9IHJhbmdlIGRhdGEuSW5kZXhlZFN0b3JlZEdhbWVMaXN0IHsKKyAgICAgICAgICBpZiBlcnIgOj0gay5TdG9yZWRHYW1lcy5TZXQoY3R4LCBpbmRleGVkU3RvcmVkR2FtZS5JbmRleCwgaW5kZXhlZFN0b3JlZEdhbWUuU3RvcmVkR2FtZSk7IGVyciAhPSBuaWwgeworICAgICAgICAgICAgICByZXR1cm4gZXJyCisgICAgICAgICAgfQorICAgICAgfQorCiAgICAgICAgcmV0dXJuIG5pbAogICAgfQoKICAgIC8vIEV4cG9ydEdlbmVzaXMgZXhwb3J0cyB0aGUgbW9kdWxlIHN0YXRlIHRvIGEgZ2VuZXNpcyBzdGF0ZS4KICAgIGZ1bmMgKGsgKktlZXBlcikgRXhwb3J0R2VuZXNpcyhjdHggY29udGV4dC5Db250ZXh0KSAoKmNoZWNrZXJzLkdlbmVzaXNTdGF0ZSwgZXJyb3IpIHsKICAgICAgICBwYXJhbXMsIGVyciA6PSBrLlBhcmFtcy5HZXQoY3R4KQogICAgICAgIGlmIGVyciAhPSBuaWwgewogICAgICAgICAgICByZXR1cm4gbmlsLCBlcnIKICAgICAgICB9CgorICAgICAgdmFyIGluZGV4ZWRTdG9yZWRHYW1lcyBbXWNoZWNrZXJzLkluZGV4ZWRTdG9yZWRHYW1lCisgICAgICBpZiBlcnIgOj0gay5TdG9yZWRHYW1lcy5XYWxrKGN0eCwgbmlsLCBmdW5jKGluZGV4IHN0cmluZywgc3RvcmVkR2FtZSBjaGVja2Vycy5TdG9yZWRHYW1lKSAoYm9vbCwgZXJyb3IpIHsKKyAgICAgICAgICBpbmRleGVkU3RvcmVkR2FtZXMgPSBhcHBlbmQoaW5kZXhlZFN0b3JlZEdhbWVzLCBjaGVja2Vycy5JbmRleGVkU3RvcmVkR2FtZXsKKyAgICAgICAgICAgICAgSW5kZXg6ICAgICAgaW5kZXgsCisgICAgICAgICAgICAgIFN0b3JlZEdhbWU6IHN0b3JlZEdhbWUsCisgICAgICAgICAgfSkKKyAgICAgICAgICByZXR1cm4gZmFsc2UsIG5pbAorICAgICAgfSk7IGVyciAhPSBuaWwgeworICAgICAgICAgIHJldHVybiBuaWwsIGVycgorICAgICAgfQorCiAgICAgICAgcmV0dXJuICZhbXA7Y2hlY2tlcnMuR2VuZXNpc1N0YXRlewogICAgICAgICAgICBQYXJhbXM6ICAgICAgICAgICAgICAgIHBhcmFtcywKKyAgICAgICAgICBJbmRleGVkU3RvcmVkR2FtZUxpc3Q6IGluZGV4ZWRTdG9yZWRHYW1lcywKICAgICAgICB9LCBuaWwKICAgIH0K",url:"https://github.com/b9lab/checkers-minimal/blob/keeper-games/keeper/genesis.go"}}),e._v(" "),g("h2",{attrs:{id:"test-again"}},[g("a",{staticClass:"header-anchor",attrs:{href:"#test-again"}},[e._v("#")]),e._v(" Test again")]),e._v(" "),g("p",[e._v("Just like you did in the "),g("RouterLink",{attrs:{to:"/hands-on-exercise/0-native/1-preparation.html"}},[e._v("previous section")]),e._v(", compile the minimal chain, re-initialize, and start it. You need to re-initialize because your genesis has changed once again:")],1),e._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtYWtlIGluc3RhbGwKJCBtYWtlIGluaXQKJCBtaW5pZCBzdGFydAo="}}),e._v(" "),g("p",[e._v("Now your minimal chain not only has a checkers module, but also a games storage area. After stopping it with "),g("kbd",[e._v("CTRL-C")]),e._v(", confirm this by calling up:")]),e._v(" "),g("CodeGroup",[g("CodeGroupItem",{attrs:{title:"Straight"}},[g("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtaW5pZCBleHBvcnQK"}})],1),e._v(" "),g("CodeGroupItem",{attrs:{title:"Clean"}},[g("tm-code-block",{staticClass:"codeblock",attrs:{language:"sh",base64:"JCBtaW5pZCBleHBvcnQgfCB0YWlsIC1uIDEgfCBqcQo="}})],1)],1),e._v(" "),g("p",[e._v("In there, you can find:")]),e._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"diff-json",base64:"ICAgIHsKICAgICAgICAuLi4KICAgICAgICAmcXVvdDthcHBfc3RhdGU6IHsKICAgICAgICAgICAgLi4uCiAgICAgICAgICAgICZxdW90O2NoZWNrZXJzJnF1b3Q7OiB7CiAgICAgICAgICAgICAgICAmcXVvdDtwYXJhbXMmcXVvdDs6IHt9LAorICAgICAgICAgICAgICAmcXVvdDtpbmRleGVkU3RvcmVkR2FtZUxpc3QmcXVvdDs6IFtdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC4uLgogICAgICAgIH0KICAgIH0K"}}),e._v(" "),g("h2",{attrs:{id:"up-next"}},[g("a",{staticClass:"header-anchor",attrs:{href:"#up-next"}},[e._v("#")]),e._v(" Up next")]),e._v(" "),g("p",[e._v("You have an on-chain game storage area, but it is empty. In the next section, you will start populating it with the use of a transaction message.")])],1)}),[],!1,null,null,null);t.default=s.exports}}]);